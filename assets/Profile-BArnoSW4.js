import{c as P,r as n,n as se,o as Y,j as e,p as re,P as E,q as D,s as Ke,t as Oe,v as _,w as Le,x as ne,y as oe,z as $e,A as Be,D as ie,E as ce,F as Ue,G as Ge,B as C,H as ze,I as He,J as Ve,K as G,L as z,C as w,d as ee,M as H,u as qe,U as Je,N as We,O as Ye,Q as Xe,S as Ze,V as Qe,W as et,X as tt,Y as at,Z as st}from"./index-DDSMV6ET.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=P("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=P("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=P("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=P("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=P("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=P("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=P("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=P("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var X="Switch",[ut,$t]=re(X),[mt,pt]=ut(X),le=n.forwardRef((t,s)=>{const{__scopeSwitch:r,name:a,checked:i,defaultChecked:l,required:o,disabled:d,value:m="on",onCheckedChange:f,form:x,...u}=t,[h,c]=n.useState(null),p=se(s,S=>c(S)),v=n.useRef(!1),I=h?x||!!h.closest("form"):!0,[b=!1,k]=Y({prop:i,defaultProp:l,onChange:f});return e.jsxs(mt,{scope:r,checked:b,disabled:d,children:[e.jsx(E.button,{type:"button",role:"switch","aria-checked":b,"aria-required":o,"data-state":me(b),"data-disabled":d?"":void 0,disabled:d,value:m,...u,ref:p,onClick:D(t.onClick,S=>{k(K=>!K),I&&(v.current=S.isPropagationStopped(),v.current||S.stopPropagation())})}),I&&e.jsx(ft,{control:h,bubbles:!v.current,name:a,value:m,checked:b,required:o,disabled:d,form:x,style:{transform:"translateX(-100%)"}})]})});le.displayName=X;var de="SwitchThumb",ue=n.forwardRef((t,s)=>{const{__scopeSwitch:r,...a}=t,i=pt(de,r);return e.jsx(E.span,{"data-state":me(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:s})});ue.displayName=de;var ft=t=>{const{control:s,checked:r,bubbles:a=!0,...i}=t,l=n.useRef(null),o=Ke(r),d=Oe(s);return n.useEffect(()=>{const m=l.current,f=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(f,"checked").set;if(o!==r&&u){const h=new Event("click",{bubbles:a});u.call(m,r),m.dispatchEvent(h)}},[o,r,a]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:l,style:{...t.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function me(t){return t?"checked":"unchecked"}var pe=le,ht=ue;const V=n.forwardRef(({className:t,...s},r)=>e.jsx(pe,{className:_("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...s,ref:r,children:e.jsx(ht,{className:_("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));V.displayName=pe.displayName;var xt="Separator",ae="horizontal",gt=["horizontal","vertical"],fe=n.forwardRef((t,s)=>{const{decorative:r,orientation:a=ae,...i}=t,l=vt(a)?a:ae,d=r?{role:"none"}:{"aria-orientation":l==="vertical"?l:void 0,role:"separator"};return e.jsx(E.div,{"data-orientation":l,...d,...i,ref:s})});fe.displayName=xt;function vt(t){return gt.includes(t)}var he=fe;const $=n.forwardRef(({className:t,orientation:s="horizontal",decorative:r=!0,...a},i)=>e.jsx(he,{ref:i,decorative:r,orientation:s,className:_("shrink-0 bg-border",s==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...a}));$.displayName=he.displayName;function bt(t,s=[]){let r=[];function a(l,o){const d=n.createContext(o),m=r.length;r=[...r,o];function f(u){const{scope:h,children:c,...p}=u,v=h?.[t][m]||d,I=n.useMemo(()=>p,Object.values(p));return e.jsx(v.Provider,{value:I,children:c})}function x(u,h){const c=h?.[t][m]||d,p=n.useContext(c);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${u}\` must be used within \`${l}\``)}return f.displayName=l+"Provider",[f,x]}const i=()=>{const l=r.map(o=>n.createContext(o));return function(d){const m=d?.[t]||l;return n.useMemo(()=>({[`__scope${t}`]:{...d,[t]:m}}),[d,m])}};return i.scopeName=t,[a,jt(i,...s)]}function jt(...t){const s=t[0];if(t.length===1)return s;const r=()=>{const a=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(l){const o=a.reduce((d,{useScope:m,scopeName:f})=>{const u=m(l)[`__scope${f}`];return{...d,...u}},{});return n.useMemo(()=>({[`__scope${s.scopeName}`]:o}),[o])}};return r.scopeName=s.scopeName,r}var U="rovingFocusGroup.onEntryFocus",Nt={bubbles:!1,cancelable:!0},B="RovingFocusGroup",[q,xe,kt]=Le(B),[yt,ge]=bt(B,[kt]),[wt,Ct]=yt(B),ve=n.forwardRef((t,s)=>e.jsx(q.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(q.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(It,{...t,ref:s})})}));ve.displayName=B;var It=n.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:r,orientation:a,loop:i=!1,dir:l,currentTabStopId:o,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:m,onEntryFocus:f,preventScrollOnEntryFocus:x=!1,...u}=t,h=n.useRef(null),c=se(s,h),p=oe(l),[v=null,I]=Y({prop:o,defaultProp:d,onChange:m}),[b,k]=n.useState(!1),S=$e(f),K=xe(r),O=n.useRef(!1),[j,R]=n.useState(0);return n.useEffect(()=>{const g=h.current;if(g)return g.addEventListener(U,S),()=>g.removeEventListener(U,S)},[S]),e.jsx(wt,{scope:r,orientation:a,dir:p,loop:i,currentTabStopId:v,onItemFocus:n.useCallback(g=>I(g),[I]),onItemShiftTab:n.useCallback(()=>k(!0),[]),onFocusableItemAdd:n.useCallback(()=>R(g=>g+1),[]),onFocusableItemRemove:n.useCallback(()=>R(g=>g-1),[]),children:e.jsx(E.div,{tabIndex:b||j===0?-1:0,"data-orientation":a,...u,ref:c,style:{outline:"none",...t.style},onMouseDown:D(t.onMouseDown,()=>{O.current=!0}),onFocus:D(t.onFocus,g=>{const N=!O.current;if(g.target===g.currentTarget&&N&&!b){const y=new CustomEvent(U,Nt);if(g.currentTarget.dispatchEvent(y),!y.defaultPrevented){const A=K().filter(M=>M.focusable),F=A.find(M=>M.active),L=A.find(M=>M.id===v),_e=[F,L,...A].filter(Boolean).map(M=>M.ref.current);Ne(_e,x)}}O.current=!1}),onBlur:D(t.onBlur,()=>k(!1))})})}),be="RovingFocusGroupItem",je=n.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:r,focusable:a=!0,active:i=!1,tabStopId:l,...o}=t,d=ne(),m=l||d,f=Ct(be,r),x=f.currentTabStopId===m,u=xe(r),{onFocusableItemAdd:h,onFocusableItemRemove:c}=f;return n.useEffect(()=>{if(a)return h(),()=>c()},[a,h,c]),e.jsx(q.ItemSlot,{scope:r,id:m,focusable:a,active:i,children:e.jsx(E.span,{tabIndex:x?0:-1,"data-orientation":f.orientation,...o,ref:s,onMouseDown:D(t.onMouseDown,p=>{a?f.onItemFocus(m):p.preventDefault()}),onFocus:D(t.onFocus,()=>f.onItemFocus(m)),onKeyDown:D(t.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){f.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const v=Dt(p,f.orientation,f.dir);if(v!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let b=u().filter(k=>k.focusable).map(k=>k.ref.current);if(v==="last")b.reverse();else if(v==="prev"||v==="next"){v==="prev"&&b.reverse();const k=b.indexOf(p.currentTarget);b=f.loop?Rt(b,k+1):b.slice(k+1)}setTimeout(()=>Ne(b))}})})})});je.displayName=be;var St={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Tt(t,s){return s!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Dt(t,s,r){const a=Tt(t.key,r);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(a))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(a)))return St[a]}function Ne(t,s=!1){const r=document.activeElement;for(const a of t)if(a===r||(a.focus({preventScroll:s}),document.activeElement!==r))return}function Rt(t,s){return t.map((r,a)=>t[(s+a)%t.length])}var Et=ve,At=je,Z="Tabs",[Pt,Bt]=re(Z,[ge]),ke=ge(),[Ft,Q]=Pt(Z),ye=n.forwardRef((t,s)=>{const{__scopeTabs:r,value:a,onValueChange:i,defaultValue:l,orientation:o="horizontal",dir:d,activationMode:m="automatic",...f}=t,x=oe(d),[u,h]=Y({prop:a,onChange:i,defaultProp:l});return e.jsx(Ft,{scope:r,baseId:ne(),value:u,onValueChange:h,orientation:o,dir:x,activationMode:m,children:e.jsx(E.div,{dir:x,"data-orientation":o,...f,ref:s})})});ye.displayName=Z;var we="TabsList",Ce=n.forwardRef((t,s)=>{const{__scopeTabs:r,loop:a=!0,...i}=t,l=Q(we,r),o=ke(r);return e.jsx(Et,{asChild:!0,...o,orientation:l.orientation,dir:l.dir,loop:a,children:e.jsx(E.div,{role:"tablist","aria-orientation":l.orientation,...i,ref:s})})});Ce.displayName=we;var Ie="TabsTrigger",Se=n.forwardRef((t,s)=>{const{__scopeTabs:r,value:a,disabled:i=!1,...l}=t,o=Q(Ie,r),d=ke(r),m=Re(o.baseId,a),f=Ee(o.baseId,a),x=a===o.value;return e.jsx(At,{asChild:!0,...d,focusable:!i,active:x,children:e.jsx(E.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":f,"data-state":x?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:m,...l,ref:s,onMouseDown:D(t.onMouseDown,u=>{!i&&u.button===0&&u.ctrlKey===!1?o.onValueChange(a):u.preventDefault()}),onKeyDown:D(t.onKeyDown,u=>{[" ","Enter"].includes(u.key)&&o.onValueChange(a)}),onFocus:D(t.onFocus,()=>{const u=o.activationMode!=="manual";!x&&!i&&u&&o.onValueChange(a)})})})});Se.displayName=Ie;var Te="TabsContent",De=n.forwardRef((t,s)=>{const{__scopeTabs:r,value:a,forceMount:i,children:l,...o}=t,d=Q(Te,r),m=Re(d.baseId,a),f=Ee(d.baseId,a),x=a===d.value,u=n.useRef(x);return n.useEffect(()=>{const h=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(h)},[]),e.jsx(Be,{present:i||x,children:({present:h})=>e.jsx(E.div,{"data-state":x?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":m,hidden:!h,id:f,tabIndex:0,...o,ref:s,style:{...t.style,animationDuration:u.current?"0s":void 0},children:h&&l})})});De.displayName=Te;function Re(t,s){return`${t}-trigger-${s}`}function Ee(t,s){return`${t}-content-${s}`}var Mt=ye,Ae=Ce,Pe=Se,Fe=De;const _t=Mt,Me=n.forwardRef(({className:t,...s},r)=>e.jsx(Ae,{ref:r,className:_("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...s}));Me.displayName=Ae.displayName;const J=n.forwardRef(({className:t,...s},r)=>e.jsx(Pe,{ref:r,className:_("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...s}));J.displayName=Pe.displayName;const W=n.forwardRef(({className:t,...s},r)=>e.jsx(Fe,{ref:r,className:_("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s}));W.displayName=Fe.displayName;const Kt=()=>{const{getCategories:t,addCategory:s,removeCategory:r,isDefaultCategory:a}=ie(),{toast:i}=ce(),[l,o]=n.useState(""),[d,m]=n.useState(""),[f,x]=n.useState(!1),u=c=>{const p=c==="income"?l:d;if(!p.trim()){i({title:"Kesalahan",description:"Nama kategori tidak boleh kosong",variant:"destructive"});return}s(c,p)?(i({title:"Berhasil",description:`Kategori "${p}" berhasil ditambahkan`}),c==="income"?o(""):m("")):i({title:"Gagal",description:"Kategori sudah ada atau tidak valid",variant:"destructive"})},h=(c,p)=>{const v=r(c,p);i(v?{title:"Berhasil",description:`Kategori "${p}" berhasil dihapus`}:{title:"Gagal",description:"Kategori default tidak dapat dihapus",variant:"destructive"})};return e.jsxs(Ue,{open:f,onOpenChange:x,children:[e.jsx(Ge,{asChild:!0,children:e.jsxs(C,{variant:"outline",className:"w-full justify-start bg-card text-card-foreground hover:bg-accent",children:[e.jsx(it,{className:"w-4 h-4 mr-3"}),"Kelola Kategori"]})}),e.jsxs(ze,{className:"bg-card border-border max-w-md max-h-[80vh] overflow-y-auto",children:[e.jsx(He,{children:e.jsx(Ve,{className:"text-foreground",children:"Kelola Kategori"})}),e.jsxs(_t,{defaultValue:"income",className:"w-full",children:[e.jsxs(Me,{className:"grid w-full grid-cols-2",children:[e.jsx(J,{value:"income",children:"Pemasukan"}),e.jsx(J,{value:"expense",children:"Pengeluaran"})]}),e.jsxs(W,{value:"income",className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(G,{placeholder:"Tambah kategori pemasukan...",value:l,onChange:c=>o(c.target.value),onKeyPress:c=>c.key==="Enter"&&u("income"),className:"bg-input border-border text-foreground"}),e.jsx(C,{onClick:()=>u("income"),size:"sm",className:"bg-primary hover:bg-primary/90",children:e.jsx(z,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:t("income").map(c=>e.jsx(w,{className:"p-3 bg-card border-border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-foreground text-sm",children:c}),a("income",c)&&e.jsx(ee,{variant:"secondary",className:"text-xs",children:"Default"})]}),!a("income",c)&&e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>h("income",c),className:"h-6 w-6 p-0 hover:bg-destructive/10 hover:text-destructive",children:e.jsx(H,{className:"w-3 h-3"})})]})},c))})]}),e.jsxs(W,{value:"expense",className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(G,{placeholder:"Tambah kategori pengeluaran...",value:d,onChange:c=>m(c.target.value),onKeyPress:c=>c.key==="Enter"&&u("expense"),className:"bg-input border-border text-foreground"}),e.jsx(C,{onClick:()=>u("expense"),size:"sm",className:"bg-primary hover:bg-primary/90",children:e.jsx(z,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:t("expense").map(c=>e.jsx(w,{className:"p-3 bg-card border-border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-foreground text-sm",children:c}),a("expense",c)&&e.jsx(ee,{variant:"secondary",className:"text-xs",children:"Default"})]}),!a("expense",c)&&e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>h("expense",c),className:"h-6 w-6 p-0 hover:bg-destructive/10 hover:text-destructive",children:e.jsx(H,{className:"w-3 h-3"})})]})},c))})]})]})]})]})};function Ot(){const[t,s]=n.useState(null),[r,a]=n.useState(!1);return n.useEffect(()=>{(()=>{if(window.navigator.standalone){a(!0);return}if(window.matchMedia("(display-mode: standalone)").matches){a(!0);return}a(!1)})();const o=m=>{m.preventDefault(),s(m)},d=()=>{a(!0),s(null)};return window.addEventListener("beforeinstallprompt",o),window.addEventListener("appinstalled",d),()=>{window.removeEventListener("beforeinstallprompt",o),window.removeEventListener("appinstalled",d)}},[]),{isInstallable:!!t,isInstalled:r,promptInstall:async()=>{if(!t)return;t.prompt();const l=await t.userChoice;return s(null),l.outcome==="accepted"}}}const Ut=()=>{const{transactions:t,getBalance:s,addTemplateData:r}=qe(),{toast:a}=ce(),{isInstallable:i,isInstalled:l,promptInstall:o}=Ot(),{toggleDefaultCategories:d,getUseDefaultsStatus:m}=ie(),[f,x]=n.useState(!0),[u,h]=n.useState(m),c=n.useRef(null),p=j=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(j),v=()=>{localStorage.removeItem("kasredone-transactions"),localStorage.removeItem("kasredone-categories"),window.location.reload()},I=j=>{h(j),d(j),a({title:j?"Kategori Default Diaktifkan":"Kategori Default Dinonaktifkan",description:j?"Kategori default akan ditampilkan":"Kategori default tidak akan ditampilkan"})},b=()=>{r(),a({title:"Data Template Ditambahkan",description:"Data transaksi contoh telah ditambahkan"})},k=()=>{const j=JSON.stringify(t,null,2),R=new Blob([j],{type:"application/json"}),g=URL.createObjectURL(R),N=document.createElement("a");N.href=g,N.download=`kasku-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(N),N.click(),document.body.removeChild(N),URL.revokeObjectURL(g),a({title:"Berhasil",description:"Data berhasil diekspor"})},S=()=>{let j=`Tanggal,Jenis,Kategori,Deskripsi,Jumlah
`;t.forEach(y=>{const A=new Date(y.date).toLocaleDateString("id-ID"),F=y.type==="income"?"Pemasukan":"Pengeluaran",L=y.description.replace(/"/g,'""');j+=`"${A}","${F}","${y.category}","${L}",${y.amount}
`});const R=new Blob([j],{type:"text/csv;charset=utf-8;"}),g=URL.createObjectURL(R),N=document.createElement("a");N.href=g,N.download=`kasku-transaksi-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(N),N.click(),document.body.removeChild(N),URL.revokeObjectURL(g),a({title:"Berhasil",description:"Data CSV berhasil diekspor"})},K=()=>{c.current?.click()},O=j=>{const R=j.target.files?.[0];if(!R)return;const g=new FileReader;g.onload=N=>{try{const y=N.target?.result,A=JSON.parse(y);if(!Array.isArray(A))throw new Error("Format data tidak valid");const F=A.filter(T=>T.id&&T.type&&typeof T.amount=="number"&&T.description&&T.category&&T.date);if(F.length===0)throw new Error("Tidak ada transaksi valid ditemukan");const L=F.map(T=>({...T,date:new Date(T.date)}));localStorage.setItem("kasku-transactions",JSON.stringify(L)),a({title:"Berhasil",description:`${F.length} transaksi berhasil diimport`}),setTimeout(()=>window.location.reload(),1e3)}catch{a({title:"Gagal Import",description:"Format file tidak valid atau file rusak",variant:"destructive"})}},g.readAsText(R),j.target.value=""};return e.jsxs("div",{className:"min-h-screen bg-background pb-20 mobile-safe",children:[e.jsxs("div",{className:"px-6 pt-14 pb-6",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("img",{src:"/kasredone.png",alt:"KasRedone Logo",className:"h-8 w-auto"})}),e.jsx("h1",{className:"text-2xl font-bold text-foreground mb-6",children:"Profil"}),e.jsxs(w,{className:"p-6 bg-card border-border mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-primary/20 rounded-full flex items-center justify-center",children:e.jsx(Je,{className:"w-8 h-8 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Pengguna KasKu"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.length," transaksi tercatat"]})]})]}),e.jsx($,{className:"my-4"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-foreground",children:p(s())}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Saldo Saat Ini"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-primary",children:t.length}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Transaksi"})]})]})]})]}),e.jsxs("div",{className:"px-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-foreground mb-4 flex items-center gap-2",children:[e.jsx(te,{className:"w-5 h-5"}),"Pengaturan"]}),e.jsxs(w,{className:"bg-card border-border",children:[e.jsxs("div",{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(rt,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:"Notifikasi"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pengingat transaksi harian"})]})]}),e.jsx(V,{checked:f,onCheckedChange:x})]}),e.jsx($,{}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(lt,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:"Aplikasi PWA"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l?"Aplikasi sudah terpasang":"Install aplikasi di perangkat Anda"})]})]}),i&&!l&&e.jsx(C,{variant:"outline",size:"sm",onClick:o,children:"Install"})]})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Kelola Data"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(w,{className:"p-4 bg-card border-border",children:e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs(C,{variant:"outline",onClick:k,className:"w-full justify-start bg-card text-card-foreground hover:bg-accent",children:[e.jsx(nt,{className:"w-4 h-4 mr-3"}),"Ekspor Data (JSON)"]}),e.jsxs(C,{variant:"outline",onClick:S,className:"w-full justify-start bg-card text-card-foreground hover:bg-accent",children:[e.jsx(ot,{className:"w-4 h-4 mr-3"}),"Ekspor Data (CSV)"]})]})}),e.jsx(w,{className:"p-4 bg-card border-border",children:e.jsx(Kt,{})}),e.jsx(w,{className:"bg-card border-border",children:e.jsxs("div",{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(te,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:"Kategori Default"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:u?"Aktif":"Nonaktif"})]})]}),e.jsx(V,{checked:u,onCheckedChange:I})]})}),e.jsx(w,{className:"p-4 bg-card border-border",children:e.jsxs(C,{variant:"outline",onClick:b,className:"w-full justify-start bg-card text-card-foreground hover:bg-accent",children:[e.jsx(z,{className:"w-4 h-4 mr-3"}),"Tambah Data Template"]})}),e.jsxs(w,{className:"p-4 bg-card border-border",children:[e.jsxs(C,{variant:"outline",onClick:K,className:"w-full justify-start bg-card text-card-foreground hover:bg-accent",children:[e.jsx(dt,{className:"w-4 h-4 mr-3"}),"Import Data"]}),e.jsx(G,{ref:c,type:"file",accept:".json",onChange:O,className:"hidden"})]}),e.jsx(w,{className:"p-4 bg-card border-border",children:e.jsxs(We,{children:[e.jsx(Ye,{asChild:!0,children:e.jsxs(C,{variant:"outline",className:"w-full justify-start text-destructive border-destructive/20 hover:bg-destructive/10",children:[e.jsx(H,{className:"w-4 h-4 mr-3"}),"Hapus Semua Data"]})}),e.jsxs(Xe,{className:"bg-card border-border",children:[e.jsxs(Ze,{children:[e.jsx(Qe,{className:"text-foreground",children:"Hapus Semua Data"}),e.jsx(et,{className:"text-muted-foreground",children:"Apakah Anda yakin ingin menghapus semua data transaksi? Aksi ini tidak dapat dibatalkan. Pastikan Anda sudah mengekspor data jika diperlukan."})]}),e.jsxs(tt,{children:[e.jsx(at,{className:"bg-secondary text-secondary-foreground hover:bg-secondary/90",children:"Batal"}),e.jsx(st,{onClick:v,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Hapus Semua"})]})]})]})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Tentang Aplikasi"}),e.jsxs(w,{className:"p-4 bg-card border-border",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(ct,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:"KasKu v1.0"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pengelola keuangan pribadi modern"})]})]}),e.jsx($,{className:"my-3"}),e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Data Anda tersimpan lokal di perangkat dan tidak dikirim ke server manapun."})]})]})]})]})};export{Ut as Profile};
